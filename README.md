# Репозиторий для проекта Share It (Шеринг)

### Функциональность ###
Приложение для совместного использования вещей. 

**Порядок аренды вещей**  
1.Хозяин вещи рассказывает другим пользователям о вещах, которыми он готов поделиться.  
2.Пользователи ищут нужные им вещи и оставляют заявку на аренду.  
3.Хозяин вещи подтверждает или отклоняет заявку на аренду.  
4.После использования вещи пользователи могут написать отзыв об аренде.  
5.Если нужной вещи нет, пользователи могут оставить запрос. 

**Приложение состоит из двух сервисов:**  
***shareit-gateway*** - шлюз, отвечает за взаимодействие с пользователем и валидацию его запросов;  
***shareit-server*** - основной сервис, в котором содержится вся логика работы приложения за исключением валидации данных в контроллерах.

### Стек технологий ### 
Java 11, Spring Boot, Spring Data, Maven, Hibernate, Docker, Mockito, PostgreSQL и H2 (для тестирования).

### Системные требования ###
Для запуска и работы приложения потребуется платформа контейнеризации Docker (https://www.docker.com/products/docker-desktop/)

### Инструкция по развёртыванию ### 
**Клонировать репозиторий.** *https://github.com/valentin32k/java-shareit.git*.  
**Соберать проект.** mvn clean package  
**Запустить контейнеры.** docker-compose up.  
Gateway будет доступен по адресу: http://localhost:8080, основной сервис - http://localhost:9090.
### Диаграмма БД

<img src="shareItDiagramm.png">  
  
------ 
### Описание БД

**Таблица users**  
Информация о пользователях:

    id — идентификатор (первичный ключ);
    name — имя или логин пользователя;
    email — электронная почта

**Таблица bookings**  
Информация о бронированиях:

    id — уникальный идентификатор бронирования (первичный ключ);
    start_date — дата и время начала бронирования;
    end_date — дата и время окончания бронирования;
    item_id — идентификатор вещи, которую пользователь бронирует (внешний ключ - отсылает к таблице items);
    booker_id — идентификатор пользователя, который осуществляет бронирование (внешний ключ - отсылает к таблице users);
    status_id — статус бронирования (WAITING — новое бронирование, ожидает одобрения, 
                                     APPROVED — бронирование подтверждено владельцем, 
                                     REJECTED — бронирование отклонено владельцем, 
                                     CANCELED — бронирование отменено создателем)
    
**Таблица items**  
Информация о вещах:

    id — уникальный идентификатор вещи (первичный ключ);
    name — краткое название;
    description — развёрнутое описание;
    is_available — статус о том, доступна или нет вещь для аренды;
    owner_id — идентификатор владельца вещи (внешний ключ - отсылает к таблице users);
    request_id — идентификатор запроса. 
                 Если вещь была создана по запросу другого пользователя, то в этом поле будет храниться ссылка 
                 на соответствующий запрос (внешний ключ - отсылает к таблице requests)

**Таблица comments**  
Отзывы по результатам использования вещей:

    id — уникальный идентификатор комментария (первичный ключ);
    text — содержимое комментария;
    item_id — вещь, к которой относится комментарий (внешний ключ - отсылает к таблице items);
    author_id — автор комментария (внешний ключ - отсылает к таблице users);
    created — дата создания комментария

**Таблица requests**  
Информация о запросах на вещи:

    id — уникальный идентификатор запроса (первичный ключ);
    description — текст запроса, содержащий описание требуемой вещи;
    requestor_id — идентификатор пользователя, создавшего запрос (внешний ключ - отсылает к таблице users)
    created — дата создания запроса